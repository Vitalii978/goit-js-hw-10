{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  button: document.querySelector('button[data-start]'),\n  input: document.getElementById('datetime-picker'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nlet selectedDate = null;\nlet isToastVisible = false;\nelements.button.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    const timeToCountdown = selectedDates[0] - Date.now();\n\n    if (timeToCountdown < 0) {\n      elements.button.disabled = true;\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        color: 'orange',\n        position: 'topRight',\n      });\n      isToastVisible = true;\n      return;\n    }\n\n\n    elements.button.disabled = false;\n    selectedDate = selectedDates[0];\n    if (isToastVisible) {\n      iziToast.hide({});\n      isToastVisible = false;\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nelements.button.addEventListener('click', clickHandler);\n\nfunction clickHandler() {\n  elements.input.disabled = true;\n  elements.button.disabled = true;\n\n  const timerId = setInterval(() => {\n    const currentTime = Date.now();\n    const remainingTime = selectedDate - currentTime;\n    if (remainingTime < 0) {\n      clearInterval(timerId);\n      elements.input.disabled = false;\n      elements.button.disabled = false;\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(remainingTime);\n\n    elements.days.innerHTML = days;\n    elements.hours.innerHTML = hours;\n    elements.minutes.innerHTML = minutes;\n    elements.seconds.innerHTML = seconds;\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addZero(Math.floor(ms / day));\n  const hours = addZero(Math.floor((ms % day) / hour));\n  const minutes = addZero(Math.floor(((ms % day) % hour) / minute));\n  const seconds = addZero(Math.floor((((ms % day) % hour) % minute) / second));\n  return { days, hours, minutes, seconds };\n}\n\nfunction addZero(n) {\n  return String(n).padStart(2, '0');\n}"],"names":["elements","selectedDate","isToastVisible","options","selectedDates","iziToast","flatpickr","clickHandler","timerId","currentTime","remainingTime","days","hours","minutes","seconds","convertMs","ms","addZero","n"],"mappings":"+IAKA,MAAMA,EAAW,CACf,OAAQ,SAAS,cAAc,oBAAoB,EACnD,MAAO,SAAS,eAAe,iBAAiB,EAChD,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEA,IAAIC,EAAe,KACfC,EAAiB,GACrBF,EAAS,OAAO,SAAW,GAE3B,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CAGrB,GAFwBA,EAAc,CAAC,EAAI,KAAK,IAAG,EAE7B,EAAG,CACvBJ,EAAS,OAAO,SAAW,GAC3BK,EAAS,MAAM,CACb,QAAS,qCACT,MAAO,SACP,SAAU,UAClB,CAAO,EACDH,EAAiB,GACjB,MACD,CAGDF,EAAS,OAAO,SAAW,GAC3BC,EAAeG,EAAc,CAAC,EAC1BF,IACFG,EAAS,KAAK,CAAA,CAAE,EAChBH,EAAiB,GAEpB,CACH,EAEAI,EAAU,mBAAoBH,CAAO,EAErCH,EAAS,OAAO,iBAAiB,QAASO,CAAY,EAEtD,SAASA,GAAe,CACtBP,EAAS,MAAM,SAAW,GAC1BA,EAAS,OAAO,SAAW,GAE3B,MAAMQ,EAAU,YAAY,IAAM,CAChC,MAAMC,EAAc,KAAK,MACnBC,EAAgBT,EAAeQ,EACrC,GAAIC,EAAgB,EAAG,CACrB,cAAcF,CAAO,EACrBR,EAAS,MAAM,SAAW,GAC1BA,EAAS,OAAO,SAAW,GAC3B,MACD,CAED,KAAM,CAAE,KAAAW,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAa,EAEjEV,EAAS,KAAK,UAAYW,EAC1BX,EAAS,MAAM,UAAYY,EAC3BZ,EAAS,QAAQ,UAAYa,EAC7Bb,EAAS,QAAQ,UAAYc,CAC9B,EAAE,GAAI,CACT,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAML,EAAOM,EAAQ,KAAK,MAAMD,EAAK,KAAG,CAAC,EACnCJ,EAAQK,EAAQ,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAC7CH,EAAUI,EAAQ,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAC1DF,EAAUG,EAAQ,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAC3E,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASG,EAAQC,EAAG,CAClB,OAAO,OAAOA,CAAC,EAAE,SAAS,EAAG,GAAG,CAClC"}